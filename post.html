<!doctype html>

<html lang="en">

<head>

<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">

<title>Post a Request — HelpAroundYou</title>

<link rel="stylesheet" href="app.css">

</head>

<body>

<header>

  <div class="container" style="display:flex;align-items:center;gap:12px">

    <a href="index.html" class="brand" style="text-decoration:none;color:inherit">

      <svg class="logo" viewBox="0 0 64 64" aria-hidden="true">

        <defs><linearGradient id="g2" x1="0" x2="0" y1="0" y2="1"><stop offset="0" stop-color="#bde3ff"/><stop offset="1" stop-color="#7cc4ff"/></linearGradient></defs>

        <circle cx="32" cy="32" r="30" fill="url(#g2)"/>

        <circle cx="26" cy="38" r="7" fill="#ffffff"/>

        <path d="M34 28c6 0 10-6 12-12-6 2-12 6-12 12Z" fill="#16a34a"/><circle cx="42" cy="18" r="4.2" fill="#16a34a"/>

      </svg>

      Help<span class="around">Around</span>You

    </a>

    <nav style="margin-left:auto"><a class="btn ghost" href="requests.html">See requests</a></nav>

  </div>

</header>



<main class="container">

  <h1 class="h1" style="font-size:30px">Post a Request</h1>

  <p class="lead">Tell us what you need and when. A neighbor will reach out to help.</p>



  <form id="reqForm" class="form-card" enctype="multipart/form-data">

    <div class="field"><label>Email *</label><input name="email" type="email" required></div>

    <div class="field"><label>Request Title *</label><input name="title" required placeholder="e.g., Need help moving a couch"></div>

    <div class="field"><label>Description *</label><textarea name="description" rows="4" required></textarea></div>



    <div class="field">

      <label>Category *</label>

      <select name="category" required>

        <option value="">Choose…</option>

        <option>Moving</option><option>Pickup with Truck</option>

        <option>Cleaning</option><option>Lawn Care</option>

        <option>Custom Task</option>

      </select>

    </div>



    <div style="display:grid;gap:12px;grid-template-columns:1fr 1fr">

      <div class="field"><label>Location (zip or area) *</label><input name="location" required></div>

      <div class="field"><label>Date needed</label><input name="dateNeeded" type="date"></div>

    </div>



    <div class="field"><label>Contact Info (optional)</label><input name="contact" placeholder="Phone, WhatsApp, or best contact"></div>



    <div class="field"><label>Photo / File (optional)</label><input name="file" type="file" accept="image/*,application/pdf"></div>



    <div style="display:flex;gap:10px">

      <button class="btn primary" type="submit">Submit Request</button>

      <a class="btn ghost" href="index.html">Cancel</a>

    </div>



    <div id="ok" class="msg ok">Thanks! Your request was submitted.</div>

    <div id="err" class="msg err">Sorry—something went wrong. Please try again.</div>

  </form>

</main>



<footer><div class="container">No commissions. Free to use. Donate any time to support the community ❤️</div></footer>



<script>

const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwMAf07IKqdgu1GxdrEbqVCwcD-ChSOvd5qLQqm9AFYMow4xRe_ym9uSAmfMULMrntD/exec";



const form = document.getElementById('reqForm');

const ok   = document.getElementById('ok');

const err  = document.getElementById('err');



form.addEventListener('submit', async (e)=>{

  e.preventDefault(); ok.style.display='none'; err.style.display='none';

  const fd = new FormData(form);

  // أرسل origin للـ CORS

  fd.append('origin', location.origin);

  try{

    const res = await fetch(SCRIPT_URL, { method:'POST', body:fd });

    const text = await res.text();

    let data = {};

    try{ data = JSON.parse(text); }catch(_){}

    if(res.ok && data.ok){

      ok.style.display='block'; form.reset();

      window.scrollTo({top:0,behavior:'smooth'});

    }else{

      err.style.display='block';

      console.log('Server response:', text);

    }

  }catch(ex){

    err.style.display='block';

    console.error(ex);

  }

});

</script>

</body>

</html>
