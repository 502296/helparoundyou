<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="UTF-8"/>

<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<title>HelpAroundYou</title>

<style>

body{font-family:Arial,sans-serif;background:#0c0c1d;color:#fff;margin:0;padding:0;text-align:center}

header{padding:20px;font-size:22px;font-weight:bold}

form{background:#1a1a2e;padding:15px;border-radius:8px;max-width:400px;margin:20px auto;display:flex;flex-direction:column;gap:10px}

input,select,textarea,button{padding:10px;border:none;border-radius:4px;font-size:14px}

input,select,textarea{width:100%}

button{background:#6a5acd;color:#fff;cursor:pointer}

button:hover{background:#836fff}

</style>

</head>

<body>

<header>Help<span style="color:#00bfff">Around</span>You</header>

<h2>Post a Request</h2>

<form id="requestForm">

<input id="title" type="text" placeholder="Title *" required/>

<select id="category">

<option value="Pickup with Truck">Pickup with Truck</option>

<option value="Lawn Care">Lawn Care</option>

<option value="Cleaning">Cleaning</option>

<option value="Other">Other</option>

</select>

<input id="zip" type="text" placeholder="ZIP / Area *" required/>

<input id="date" type="date"/>

<textarea id="description" placeholder="Description"></textarea>

<input id="file" type="file"/>

<button type="submit">Submit</button>

</form>



<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<script>

const SUPABASE_URL="https://afqjgrcoiwitfftbjltp.supabase.co";

const SUPABASE_ANON_KEY="Ø¶Ø¹_Ø§Ù„Ù€anon_key_Ù‡Ù†Ø§";

const BUCKET="uploads";

const sb=supabase.createClient(SUPABASE_URL,SUPABASE_ANON_KEY);

const form=document.getElementById("requestForm");

form.addEventListener("submit",async(e)=>{

e.preventDefault();

const title=document.getElementById("title").value;

const category=document.getElementById("category").value;

const zip=document.getElementById("zip").value;

const date=document.getElementById("date").value;

const description=document.getElementById("description").value;

const file=document.getElementById("file").files[0];

let fileUrl=null;

if(file){

const filePath=`req_${Date.now()}_${file.name}`;

const{error:uploadError}=await sb.storage.from(BUCKET).upload(filePath,file);

if(uploadError){alert("Upload error: "+uploadError.message);return;}

const{data:publicUrl}=sb.storage.from(BUCKET).getPublicUrl(filePath);

fileUrl=publicUrl.publicUrl;

}

const{error}=await sb.from("requests").insert([{title,category,zip,task_date:date,description,media_urls:fileUrl?[fileUrl]:[]}]);

if(error){alert("DB error: "+error.message);}else{alert("ØªÙ… Ù†Ø´Ø± Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ ðŸŽ‰");form.reset();}

});

</script>

</body>

</html>
