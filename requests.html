<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>

<title>Recent Requests — Help Around You</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>

:root{--green:#18A355;--ink:#0f172a;--muted:#556276;--surface:#F7FAFC;--shadow:0 10px 30px rgba(15,23,42,.08);--radius:16px}

*{box-sizing:border-box} body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink)}

.container{max-width:980px;margin:0 auto;padding:24px}

header{display:flex;align-items:center;gap:12px;margin-bottom:10px}

.logo{width:54px;height:54px;border-radius:50%;

  background:radial-gradient(circle at 30% 30%, #A6EAC0 0 26px, #7FDB91 26px 56px),

             radial-gradient(circle at 73% 68%, #18A355 0 8px, #18A35500 10px);

  box-shadow:inset 0 0 0 4px #CFEAFF;}

h1{margin:0;font-weight:800} h1 .around{color:var(--green)}

.list{display:grid;grid-template-columns:1fr 1fr;gap:16px}

.card{background:var(--surface);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}

small{color:var(--muted)}

@media(max-width:900px){.list{grid-template-columns:1fr}}

</style>

</head>

<body>

  <div class="container">

    <header>

      <div class="logo" aria-hidden="true"></div>

      <h1>Help <span class="around">Around</span> You</h1>

    </header>



    <h2 style="margin:0 0 14px">Recent Requests</h2>

    <div id="list" class="list"></div>

    <p id="empty" style="display:none;color:#6b7280">No requests yet.</p>

  </div>



<script>

const API = "YOUR_GAS_WEB_APP_URL"; // نفس رابط الويب-آب

const list = document.getElementById('list');

const empty = document.getElementById('empty');



(async ()=>{

  try{

    const res = await fetch(API + '?limit=50');

    const data = await res.json();

    if(!data.ok) throw new Error('API error');



    if(!data.items.length){ empty.style.display='block'; return; }



    data.items.forEach(it=>{

      const d = new Date(it.timestamp);

      const el = document.createElement('div');

      el.className='card';

      el.innerHTML = `

        <h3 style="margin:0 0 6px">${escapeHtml(it.title||'Untitled')}</h3>

        <small>${d.toLocaleString()} — ${escapeHtml(it.category||'')}</small>

        <p style="margin:8px 0 0">${escapeHtml(it.description||'')}</p>

        <p style="margin:6px 0 0"><strong>Area:</strong> ${escapeHtml(it.location||'')}</p>

        ${it.fileUrl ? `<p style="margin:6px 0 0"><a href="${it.fileUrl}" target="_blank" rel="noopener">View attachment</a></p>` : ''}

      `;

      list.appendChild(el);

    });

  }catch(err){

    empty.style.display='block';

    empty.textContent = 'Could not load requests.';

  }

})();



function escapeHtml(s){return String(s).replace(/[&<>"']/g,m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m]))}

</script>

</body>

</html>
