<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>

<title>Recent Requests — Help Around You</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>

:root{--green:#18a355;--ink:#0f172a;--muted:#5b677a;--card:#f7fafc;--shadow:0 12px 28px rgba(15,23,42,.08);--radius:18px}

*{box-sizing:border-box} body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink)}

.container{max-width:980px;margin:0 auto;padding:24px}

header{display:flex;align-items:center;gap:14px;margin-bottom:10px}

.logo{width:68px;height:68px;border-radius:50%;

  background:radial-gradient(circle at 34% 34%, #b5f0c9 0 30px, #89e0a3 30px 62px),

             radial-gradient(circle at 70% 68%, #18a355 0 10px, #18a35500 11px);

  box-shadow:inset 0 0 0 6px #cfe7ff;}

h1{margin:0;font-weight:800;font-size:26px} h1 .around{color:#0f7a3b}

.grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}

.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}

small{color:var(--muted)}

@media(max-width:900px){.grid{grid-template-columns:1fr}}

</style>

</head>

<body>

<div class="container">

  <header>

    <div class="logo" aria-hidden="true"></div>

    <h1>Help <span class="around">Around</span> You</h1>

  </header>



  <h2 style="margin:0 0 14px">Recent requests</h2>

  <div id="grid" class="grid"></div>

  <p id="empty" style="display:none;color:#6b7280">No requests yet.</p>

</div>



<script>

const API = "https://script.google.com/macros/s/AKfycbwMAf07IKqdgu1GxdrEbqVCwcD-ChSOvd5qLQqm9AFYMow4xRe_ym9uSAmfMULMrntD/exec"; // نفس الرابط



const grid  = document.getElementById('grid');

const empty = document.getElementById('empty');



(async()=>{

  try{

    const res = await fetch(API + '?limit=50');

    const data = await res.json();

    if(!data.ok) throw new Error('API error');

    if(!data.items || !data.items.length){ empty.style.display='block'; return; }



    data.items.forEach(it=>{

      const d = new Date(it.timestamp);

      const div = document.createElement('div');

      div.className='card';

      div.innerHTML = `

        <h3 style="margin:0 0 6px">${esc(it.title||'Untitled')}</h3>

        <small>${d.toLocaleDateString()} · ${esc(it.category||'')}</small>

        <p style="margin:8px 0 0">${esc(it.description||'')}</p>

        <p style="margin:6px 0 0"><strong>Area:</strong> ${esc(it.location||'')}</p>

        ${it.fileUrl ? `<p style="margin:6px 0 0"><a href="${it.fileUrl}" target="_blank" rel="noopener">Attachment</a></p>` : ``}

      `;

      grid.appendChild(div);

    });

  }catch(e){

    empty.style.display='block';

    empty.textContent='Could not load requests.';

  }

})();

function esc(s){return String(s).replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[m]))}

</script>

</body>

</html>
