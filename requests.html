<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>

<title>Recent Requests — Help Around You</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>

:root{--bg:#faf7f2;--ink:#111827;--muted:#6b7280;--card:#fff;--shadow:0 14px 38px rgba(0,0,0,.08);--radius:16px}

*{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}

.container{max-width:1100px;margin:0 auto;padding:28px}

header{display:flex;align-items:center;gap:12px}

.logo{width:56px;height:56px;border-radius:12px;background:conic-gradient(from 190deg at 70% 30%, #6c5ce7, #ff6b6b);

  box-shadow:inset 0 0 0 5px rgba(255,255,255,.7), var(--shadow)}

h1{margin:0;font-weight:800}

.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:16px}

.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}

.card h3{margin:0 0 6px}

small{color:var(--muted)}

@media (max-width:1020px){.grid{grid-template-columns:1fr 1fr}}

@media (max-width:720px){.grid{grid-template-columns:1fr}}

</style>

</head>

<body>

<div class="container">

  <header>

    <div class="logo"></div>

    <h1>Help Around You</h1>

  </header>



  <h2 style="margin:12px 0 8px">Recent requests</h2>

  <div id="grid" class="grid"></div>

  <p id="empty" style="display:none;color:#6b7280">No requests yet.</p>

</div>



<script>

const API = "https://script.google.com/macros/s/AKfycbwMAf07IKqdgu1GxdrEbqVCwcD-ChSOvd5qLQqm9AFYMow4xRe_ym9uSAmfMULMrntD/exec";

const grid  = document.getElementById('grid');

const empty = document.getElementById('empty');



(async()=>{

  try{

    const res = await fetch(API + '?limit=60');

    const data = await res.json();

    if(!data.ok) throw new Error('API error');

    const items = data.items || [];

    if(!items.length){ empty.style.display='block'; return; }



    for(const it of items){

      const d = it.timestamp ? new Date(it.timestamp) : null;

      const el = document.createElement('div');

      el.className='card';

      el.innerHTML = `

        <h3>${esc(it.title||'Untitled')}</h3>

        <small>${d?d.toLocaleDateString():''} ${it.category?('· '+esc(it.category)) : ''}</small>

        <p style="margin:8px 0 0">${esc(it.description||'')}</p>

        <p style="margin:8px 0 0"><strong>Area:</strong> ${esc(it.location||'')}</p>

        ${it.fileUrl?`<p style="margin:8px 0 0"><a href="${it.fileUrl}" target="_blank" rel="noopener">Attachment</a></p>`:''}

      `;

      grid.appendChild(el);

    }

  }catch(e){

    empty.style.display='block';

    empty.textContent='Could not load requests.';

  }

})();

function esc(s){return String(s).replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]))}

</script>

</body>

</html>
