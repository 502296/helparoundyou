<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>

<title>Recent Requests — Help Around You</title>

<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@700;800&family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>

:root{--ink:#0e1b2b;--muted:#5d6b7a;--halo:#bfe8ff;--card:#fff;--radius:22px;--shadow:0 18px 40px rgba(14,27,43,.08)}

*{box-sizing:border-box} body{margin:0;background:linear-gradient(180deg,#f7fbff,#eaf4ff);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}

.container{max-width:1040px;margin:0 auto;padding:28px}

header{display:flex;align-items:center;gap:16px;margin-bottom:4px}

.logo{width:78px;height:78px;border-radius:50%;

  background:

    radial-gradient(circle at 34% 34%, #c9f2da 0 34px, #97e6b7 34px 72px),

    radial-gradient(circle at 70% 68%, #22c063 0 12px, #0000 13px);

  box-shadow:inset 0 0 0 8px var(--halo), 0 10px 18px rgba(0,0,0,.04);}

h1{font-family:Nunito,Inter,sans-serif;margin:0;font-size:28px} h1 .around{color:#117a3e}

.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:14px}

.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}

.card h3{margin:0 0 6px;font-family:Nunito,Inter,sans-serif}

small{color:var(--muted)}

@media (max-width:1020px){.grid{grid-template-columns:1fr 1fr}}

@media (max-width:720px){.grid{grid-template-columns:1fr}}

</style>

</head>

<body>

<div class="container">

  <header>

    <div class="logo" aria-hidden="true"></div>

    <h1>Help <span class="around">Around</span> You</h1>

  </header>



  <h2 style="margin:8px 0 10px;font-family:Nunito,Inter,sans-serif">Recent requests</h2>

  <div id="grid" class="grid"></div>

  <p id="empty" style="display:none;color:#6b7683">No requests yet.</p>

</div>



<script>

const API = "https://script.google.com/macros/s/AKfycbwMAf07IKqdgu1GxdrEbqVCwcD-ChSOvd5qLQqm9AFYMow4xRe_ym9uSAmfMULMrntD/exec";



const grid  = document.getElementById('grid');

const empty = document.getElementById('empty');



(async()=>{

  try{

    const res = await fetch(API + '?limit=60');

    const data = await res.json();

    if(!data.ok) throw new Error('API error');

    const items = data.items || [];

    if(!items.length){ empty.style.display='block'; return; }



    for(const it of items){

      const d = it.timestamp ? new Date(it.timestamp) : null;

      const div = document.createElement('div');

      div.className='card';

      div.innerHTML = `

        <h3>${esc(it.title||'Untitled')}</h3>

        <small>${d?d.toLocaleDateString():''} ${it.category?('· '+esc(it.category)) : ''}</small>

        <p style="margin:8px 0 0">${esc(it.description||'')}</p>

        <p style="margin:8px 0 0"><strong>Area:</strong> ${esc(it.location||'')}</p>

        ${it.fileUrl?`<p style="margin:8px 0 0"><a href="${it.fileUrl}" target="_blank" rel="noopener">Attachment</a></p>`:''}

      `;

      grid.appendChild(div);

    }

  }catch(e){

    empty.style.display='block';

    empty.textContent='Could not load requests.';

  }

})();

function esc(s){return String(s).replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]))}

</script>

</body>

</html>
