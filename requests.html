<!doctype html>

<html lang="en">

<head>

<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">

<title>Recent Requests — HelpAroundYou</title>

<style>

:root{--bg:#f6fbff;--card:#fff;--ink:#0f172a;--muted:#475569;--brand:#16a34a}

*{box-sizing:border-box}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;color:var(--ink);background:var(--bg)}

.container{max-width:980px;margin:0 auto;padding:24px}

header{background:var(--card);border-bottom:1px solid #e5e7eb}

.brand{display:flex;align-items:center;gap:12px;font-weight:800;font-size:24px}.brand .around{color:#0f7c2e}

.logo{width:48px;height:48px}nav{margin-left:auto}

.btn{border:0;border-radius:999px;padding:10px 16px;font-weight:600;cursor:pointer}

.btn.primary{background:var(--brand);color:#fff}

.list{display:grid;gap:12px}

.item{background:var(--card);border:1px solid #e5e7eb;border-radius:12px;padding:14px}

.item h3{margin:0 0 6px}.badge{display:inline-block;padding:4px 8px;border-radius:999px;background:#eef2ff;font-size:12px}

</style>

</head>

<body>

<header>

  <div class="container" style="display:flex;align-items:center;gap:12px">

    <a href="index.html" class="brand" style="text-decoration:none;color:inherit">

      <svg class="logo" viewBox="0 0 64 64" aria-hidden="true">

        <defs><linearGradient id="g3" x1="0" x2="0" y1="0" y2="1"><stop offset="0" stop-color="#bde3ff"/><stop offset="1" stop-color="#7cc4ff"/></linearGradient></defs>

        <circle cx="32" cy="32" r="30" fill="url(#g3)"/>

        <circle cx="26" cy="38" r="7" fill="#fff"/>

        <path d="M34 28c6 0 10-6 12-12-6 2-12 6-12 12Z" fill="#16a34a"/><circle cx="42" cy="18" r="4.2" fill="#16a34a"/>

      </svg>

      Help<span class="around">Around</span>You

    </a>

    <nav style="margin-left:auto"><a class="btn primary" href="post.html">Post a Request</a></nav>

  </div>

</header>



<main class="container">

  <h1 style="font-weight:800;margin:16px 0">Recent Requests</h1>

  <div id="list" class="list"></div>

</main>



<script>

const SCRIPT_URL = "PUT_YOUR_SCRIPT_URL_HERE"; // <-- نفس رابط الويب-أب

const list = document.getElementById('list');



(async ()=>{

  try{

    const res = await fetch(SCRIPT_URL + '?origin=' + encodeURIComponent(location.origin));

    const data = await res.json();

    if(!data.ok) throw new Error('API error');

    const items = data.items.reverse();

    if(items.length === 0){ list.innerHTML = '<div class="item">No requests yet. Be the first!</div>'; return; }

    list.innerHTML = items.map(it => `

      <div class="item">

        <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">

          <h3>${esc(it.title||'(No title)')}</h3>

          <span class="badge">${esc(it.category||'')}</span>

        </div>

        <div style="color:#475569;margin:6px 0">${esc(it.description||'')}</div>

        <div style="font-size:14px;color:#475569">

          <b>Area:</b> ${esc(it.location||'')} &nbsp;·&nbsp;

          <b>Date:</b> ${esc(it.dateNeeded||'')}

        </div>

        ${it.fileUrl ? `<div style="margin-top:8px"><a href="${it.fileUrl}" target="_blank">View attachment</a></div>`:''}

      </div>

    `).join('');

  }catch(err){

    list.innerHTML = '<div class="item">Could not load requests.</div>'; console.error(err);

  }

})();

function esc(s){return (s||'').replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[m]))}

</script>

</body>

</html>
